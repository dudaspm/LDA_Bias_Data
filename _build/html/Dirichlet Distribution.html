
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dirichlet Distribution &#8212; Latent Dirichlet Allocation (LDA) &amp; Biased Data</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Jigsaw - an Implementation of LDA" href="Jigsaw%20-%20an%20Implementation%20of%20LDA.html" />
    <link rel="prev" title="Latent Dirichlet Allocation (LDA)" href="Latent%20Dirichlet%20Allocation%20%28LDA%29.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      <h1 class="site-logo" id="site-title">Latent Dirichlet Allocation (LDA) & Biased Data</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Introduction to the Notebook
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  LDA and Bias Data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Notebook%20Introduction.html">
   Notebook Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Latent%20Dirichlet%20Allocation%20%28LDA%29.html">
   Latent Dirichlet Allocation (LDA)
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Dirichlet Distribution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Jigsaw%20-%20an%20Implementation%20of%20LDA.html">
   Jigsaw - an Implementation of LDA
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Visualizing%20and%20Analyzing%20Jigsaw.html">
   Visualizing and Analyzing Jigsaw
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Dirichlet Distribution.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        
        <a class="edit-button" href="https://github.com/dudaspm/LDA_Bias_Data/edit/main/Dirichlet Distribution.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/dudaspm/LDA_Bias_Data/main?urlpath=lab/tree/Dirichlet Distribution.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/dudaspm/LDA_Bias_Data/blob/main/Dirichlet Distribution.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-chinese-restaurant-process">
   The Chinese Restaurant Process
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rules-for-our-thought-problem">
   Rules for Our Thought Problem
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#an-infinite-amount-of-tables">
     1. An Infinite Amount of Tables (⚪)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-hungry-person-only-two-options">
     2. A Hungry Person (🤔) Only Two Options
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#many-only-one-empty">
     3. Many ⚪ &amp; 😃, Only One Empty ⚪
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#all-tables-are-equal">
     All Tables (⚪) are Equal
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#key-for-thought-problem">
     Key for Thought Problem
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#all-solutions-to-the-extreme">
   All Solutions 💥TO THE EXTREME💥
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-social-butterfly">
     1. The Social Butterfly
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-gambler">
     2. The Gambler
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-long-day">
     3. The Long Day
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-conclusions">
   The Conclusions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#st-conclusion">
     ✨1st Conclusion✨
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#nd-conclusion">
     ✨2nd Conclusion✨
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-rich-get-richer">
     💰 The Rich Get Richer 💰
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#actual-data">
   Actual Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alpha-01">
     alpha = .01
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alpha-1">
     alpha = .1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     alpha = 1
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alpha-10">
     alpha = 10
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#alpha-100">
     alpha = 100
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#force-directed-graph-dirichlet-example">
   Force-Directed Graph + Dirichlet Example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#next-we-provide-a-use-case-for-lda">
   Next we provide a use-case for LDA.
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="dirichlet-distribution">
<h1>Dirichlet Distribution<a class="headerlink" href="#dirichlet-distribution" title="Permalink to this headline">¶</a></h1>
<p>In this section, we will be showcasing the Dirichlet Distribution and using D3.js <span id="id1">[<a class="reference internal" href="intro.html#id11">Bostock <em>et al.</em>, 2011</a>]</span> to provide illustrations for concepts.</p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span>  <span class="n">HTML</span>

<span class="k">def</span> <span class="nf">load_d3_in_cell_output</span><span class="p">():</span>
  <span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;script src=&#39;https://d3js.org/d3.v6.min.js&#39;&gt;&lt;/script&gt;&quot;</span><span class="p">))</span>
<span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s1">&#39;pre_run_cell&#39;</span><span class="p">,</span> <span class="n">load_d3_in_cell_output</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-chinese-restaurant-process">
<h2>The Chinese Restaurant Process<a class="headerlink" href="#the-chinese-restaurant-process" title="Permalink to this headline">¶</a></h2>
<p>In the thought problem, we will be examing a situation where a hungry person (🤔) enters a restaurant and needs to choose a table (⚪).</p>
<p>This original was developed by <span id="id2">[<a class="reference internal" href="intro.html#id5">Aldous, 1985</a>]</span> and a great resource to consider is Pasupat’s (<span id="id3">[<a class="reference internal" href="intro.html#id6">Pasupat, 2021</a>]</span>).</p>
<p>Here are the ground rules for this thought problem.</p>
</div>
<div class="section" id="rules-for-our-thought-problem">
<h2>Rules for Our Thought Problem<a class="headerlink" href="#rules-for-our-thought-problem" title="Permalink to this headline">¶</a></h2>
<div class="section" id="an-infinite-amount-of-tables">
<h3>1. An Infinite Amount of Tables (⚪)<a class="headerlink" href="#an-infinite-amount-of-tables" title="Permalink to this headline">¶</a></h3>
<p>We are depicting five tables (⚪⚪⚪⚪⚪), but we need to consider a situation where the number of tables is infinite.</p>
<ul class="simple">
<li><p>⚪ = ∞</p></li>
</ul>
</div>
<div class="section" id="a-hungry-person-only-two-options">
<h3>2. A Hungry Person (🤔) Only Two Options<a class="headerlink" href="#a-hungry-person-only-two-options" title="Permalink to this headline">¶</a></h3>
<p>When a hungry person (🤔) walks into the restaurant they have two options:</p>
<ul class="simple">
<li><p>Either they sit a table (⚪) with someone else (😃)</p></li>
<li><p>or pick a new table  (⚪)</p></li>
</ul>
<p>To simplify this, here a decision chart.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><img alt="_images/Dirichlet Distribution_7_1.svg" src="_images/Dirichlet Distribution_7_1.svg" /></div>
</div>
<p>And to further reduce this down, we will be using this:</p>
</div>
<div class="section" id="many-only-one-empty">
<h3>3. Many ⚪ &amp; 😃, Only One Empty ⚪<a class="headerlink" href="#many-only-one-empty" title="Permalink to this headline">¶</a></h3>
<p>This goes with #2, but in our scenario, there is the number of tables (⚪) with people (😃), but when considering an empty table (⚪). We will only consider <em>one</em> of the infinite number of tables (⚪) open. Another way to consider this is either a hungry person (🤔):</p>
<ul class="simple">
<li><p>sits at the <em>one of possible many</em> tables (⚪) with someone else (😃)</p></li>
<li><p><em>OR</em> they sit at the <em>one</em> new table  (⚪)</p></li>
</ul>
</div>
<div class="section" id="all-tables-are-equal">
<h3>All Tables (⚪) are Equal<a class="headerlink" href="#all-tables-are-equal" title="Permalink to this headline">¶</a></h3>
<p>Notice that all the tables are equal distance away. So, there is no weighting based on the distance, and each table is equally likely to be picked.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;runWeight()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;runWeight&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">runWeight</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">270</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">35</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#runWeight&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg1</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#runWeight&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg1</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg1</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">svg1</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">runWeight</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="runWeight()" value="Run Animation">
<div id="runWeight"></div>

<script type="text/javascript">   
    function runWeight() {
        var width = 600
        var height = 270
        var margin = 35
        var radius = 200

        d3.select("div#runWeight").select("svg").remove()
        var svg1 = d3.select("div#runWeight").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg1.selectAll("line")
            .data(d3.range(5))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg1.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", "white")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        svg1.append("text")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")
    }
    runWeight()
</script>
</div></div>
</div>
</div>
<div class="section" id="key-for-thought-problem">
<h3>Key for Thought Problem<a class="headerlink" href="#key-for-thought-problem" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>🤔 - hungry person</p>
</div></blockquote>
<ul class="simple">
<li><p>The person who needs to find a seat at a table</p></li>
</ul>
<blockquote>
<div><p>😃 - person eating</p>
</div></blockquote>
<ul class="simple">
<li><p>A person already at a table</p></li>
</ul>
<blockquote>
<div><p>⚪ - a possible table</p>
</div></blockquote>
<ul class="simple">
<li><p>A potential seat for the hungry person to sit at</p></li>
</ul>
<blockquote>
<div><p>⚫ - a not possible table</p>
</div></blockquote>
<ul class="simple">
<li><p>Not a potential seat for the hungry person to sit at (see Rule #3).</p></li>
</ul>
</div>
</div>
<div class="section" id="all-solutions-to-the-extreme">
<h2>All Solutions 💥TO THE EXTREME💥<a class="headerlink" href="#all-solutions-to-the-extreme" title="Permalink to this headline">¶</a></h2>
<p>Now that we have our ground rules let’s approach this problem from, what I am calling, the extreme positions. We have not mentioned a single bit of math up to this point, but this section will contain conversations around probabilities. Here are three scenarios for our extreme positions.</p>
<ol class="simple">
<li><p>The Social Butterfly</p></li>
<li><p>The Gambler</p></li>
<li><p>The Long Day</p></li>
</ol>
<div class="section" id="the-social-butterfly">
<h3>1. The Social Butterfly<a class="headerlink" href="#the-social-butterfly" title="Permalink to this headline">¶</a></h3>
<p>The social butterfly assumes every person that enters the restaurants wants to sit at the table with the most people.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;social1()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;social1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">social1</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">270</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">35</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#social1&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg2</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#social1&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg2</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg2</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">0</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg2</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg2</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">social1</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="social1()" value="Run Animation">
<div id="social1"></div>

<script type="text/javascript">   
    function social1() {
        var width = 600
        var height = 270
        var margin = 35
        var radius = 200

        d3.select("div#social1").select("svg").remove()
        var svg2 = d3.select("div#social1").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg2.selectAll("line")
            .data(d3.range(1))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg2.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=0)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["1","0","0","0","0"]
        svg2.selectAll("text")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg2.append("text")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")
    }
    social1()
</script>
</div></div>
</div>
<p>The following person (🤔) walks in and sits at the most popular table.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;social2()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;social2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">social2</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#social2&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg3</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#social2&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">1</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/1&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg3</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed&quot;</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg3</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">social2</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="social2()" value="Run Animation">
<div id="social2"></div>

<script type="text/javascript">   
    function social2() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#social2").select("svg").remove()
        var svg3 = d3.select("div#social2").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg3.selectAll("line")
            .data(d3.range(2))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg3.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=1)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["1/1","0","0","0","0"]
        svg3.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg3.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed")
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed")
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg3)
    }
    social2()
</script>
</div></div>
</div>
<p>and repeat this process for the next three customers (🤔).</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;social5()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;social5&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">social5</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#social5&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg6</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#social5&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg6</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg6</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">1</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;4/4&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg6</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg6</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed&quot;</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">4</span><span class="p">,</span><span class="nx">svg6</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">social5</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="social5()" value="Run Animation">
<div id="social5"></div>

<script type="text/javascript">   
    function social5() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#social5").select("svg").remove()
        var svg6 = d3.select("div#social5").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg6.selectAll("line")
            .data(d3.range(2))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg6.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=1)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["4/4","0","0","0","0"]
        svg6.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg6.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed")
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed")
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,4,svg6)
    }
    social5()
</script>
</div></div>
</div>
</div>
<div class="section" id="the-gambler">
<h3>2. The Gambler<a class="headerlink" href="#the-gambler" title="Permalink to this headline">¶</a></h3>
<p>The Gambler is the person who only cares about the probabilities. Meaning, if there are two tables (⚪), then they have a 50/50 choice, and they do not care at all about the people sitting there or not.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;gambler1()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;gambler1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">gambler1</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">270</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">35</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler1&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg7</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler1&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg7</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg7</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">0</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/1&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg7</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg7</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">gambler1</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="gambler1()" value="Run Animation">
<div id="gambler1"></div>

<script type="text/javascript">   
    function gambler1() {
        var width = 600
        var height = 270
        var margin = 35
        var radius = 200

        d3.select("div#gambler1").select("svg").remove()
        var svg7 = d3.select("div#gambler1").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg7.selectAll("line")
            .data(d3.range(1))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg7.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=0)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["1/1","0","0","0","0"]
        svg7.selectAll("text")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg7.append("text")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")
    }
    gambler1()
</script>
</div></div>
</div>
<p>Where the probability is now <span class="math notranslate nohighlight">\(p = \frac{1}{2}\)</span></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;gambler2()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;gambler2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">gambler2</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler2&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg8</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler2&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg8</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg8</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">1</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/2&quot;</span><span class="p">,</span><span class="s2">&quot;1/2&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg8</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg8</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed&quot;</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg8</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">gambler2</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="gambler2()" value="Run Animation">
<div id="gambler2"></div>

<script type="text/javascript">   
    function gambler2() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#gambler2").select("svg").remove()
        var svg8 = d3.select("div#gambler2").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg8.selectAll("line")
            .data(d3.range(2))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg8.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=1)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["1/2","1/2","0","0","0"]
        svg8.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg8.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed")
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed")
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg8)
    }
    gambler2()
</script>
</div></div>
</div>
<p>Now <span class="math notranslate nohighlight">\(p = \frac{1}{3}\)</span></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;gambler3()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;gambler3&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">gambler3</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler3&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg9</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler3&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/3&quot;</span><span class="p">,</span><span class="s2">&quot;1/3&quot;</span><span class="p">,</span><span class="s2">&quot;1/3&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg9</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">3</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg9</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="o">+</span><span class="nx">d</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        
        <span class="nx">svg9</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg9</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg9</span><span class="p">,</span><span class="mf">0</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg9</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">gambler3</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="gambler3()" value="Run Animation">
<div id="gambler3"></div>

<script type="text/javascript">   
    function gambler3() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#gambler3").select("svg").remove()
        var svg9 = d3.select("div#gambler3").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])
        fractions = ["1/3","1/3","1/3","0","0"]
        svg9.selectAll("line")
            .data(d3.range(3))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg9.selectAll("circle")
            // Collect
            .data(fractions)
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (+d!=0)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))


        svg9.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg9.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg9,0)
        var cx = ((radius) * Math.cos(x(1))) + (width/2)
        var cy = ((radius) * Math.sin(x(1))) + (height-margin)
        addPeople(cx,cy,1,svg9,1)
    }
    gambler3()
</script>
</div></div>
</div>
<p>Then probability is now <span class="math notranslate nohighlight">\(p = \frac{1}{4}\)</span></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;gambler4()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;gambler4&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">gambler4</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler4&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg10</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler4&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/4&quot;</span><span class="p">,</span><span class="s2">&quot;1/4&quot;</span><span class="p">,</span><span class="s2">&quot;1/4&quot;</span><span class="p">,</span><span class="s2">&quot;1/4&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg10</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">4</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg10</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="o">+</span><span class="nx">d</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        
        <span class="nx">svg10</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg10</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg10</span><span class="p">,</span><span class="mf">0</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg10</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">2</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">2</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg10</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">gambler4</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="gambler4()" value="Run Animation">
<div id="gambler4"></div>

<script type="text/javascript">   
    function gambler4() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#gambler4").select("svg").remove()
        var svg10 = d3.select("div#gambler4").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])
        fractions = ["1/4","1/4","1/4","1/4","0"]
        svg10.selectAll("line")
            .data(d3.range(4))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg10.selectAll("circle")
            // Collect
            .data(fractions)
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (+d!=0)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))


        svg10.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg10.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg10,0)
        var cx = ((radius) * Math.cos(x(1))) + (width/2)
        var cy = ((radius) * Math.sin(x(1))) + (height-margin)
        addPeople(cx,cy,1,svg10,1)
        var cx = ((radius) * Math.cos(x(2))) + (width/2)
        var cy = ((radius) * Math.sin(x(2))) + (height-margin)
        addPeople(cx,cy,1,svg10,2)
    }
    gambler4()
</script>
</div></div>
</div>
<p>Finally, all tables (⚪) are probability <span class="math notranslate nohighlight">\(p = \frac{1}{5}\)</span></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;gambler5()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;gambler5&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">gambler5</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler5&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg11</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#gambler5&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">]</span>
        <span class="nx">svg11</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg11</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="o">+</span><span class="nx">d</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        
        <span class="nx">svg11</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg11</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg11</span><span class="p">,</span><span class="mf">0</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg11</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">2</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">2</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg11</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">3</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">3</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg11</span><span class="p">,</span><span class="mf">3</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">gambler5</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="gambler5()" value="Run Animation">
<div id="gambler5"></div>

<script type="text/javascript">   
    function gambler5() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#gambler5").select("svg").remove()
        var svg11 = d3.select("div#gambler5").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])
        fractions = ["1/5","1/5","1/5","1/5","1/5"]
        svg11.selectAll("line")
            .data(d3.range(5))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg11.selectAll("circle")
            // Collect
            .data(fractions)
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (+d!=0)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))


        svg11.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg11.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg11,0)
        var cx = ((radius) * Math.cos(x(1))) + (width/2)
        var cy = ((radius) * Math.sin(x(1))) + (height-margin)
        addPeople(cx,cy,1,svg11,1)
        var cx = ((radius) * Math.cos(x(2))) + (width/2)
        var cy = ((radius) * Math.sin(x(2))) + (height-margin)
        addPeople(cx,cy,1,svg11,2)
        var cx = ((radius) * Math.cos(x(3))) + (width/2)
        var cy = ((radius) * Math.sin(x(3))) + (height-margin)
        addPeople(cx,cy,1,svg11,3)
    }
    gambler5()
</script>
</div></div>
</div>
</div>
<div class="section" id="the-long-day">
<h3>3. The Long Day<a class="headerlink" href="#the-long-day" title="Permalink to this headline">¶</a></h3>
<p>The Long Day scenario describes a situation where customers (🤔) coming into the restaurant had a reeeeeeeeeeeeeeeally long day. All they want is a table (⚪) to themselves to eat their food, pay, and go home. This scenario is the opposite of the Social Butterfly, where people are at a table (😃 &amp; ⚪). They will find an empty table (⚪).</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;long1()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;long1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">long1</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">500</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">270</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">35</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#long1&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg12</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#long1&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg12</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg12</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">0</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/1&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg12</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg12</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">long1</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="long1()" value="Run Animation">
<div id="long1"></div>

<script type="text/javascript">   
    function long1() {
        var width = 500
        var height = 270
        var margin = 35
        var radius = 200

        d3.select("div#long1").select("svg").remove()
        var svg12 = d3.select("div#long1").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg12.selectAll("line")
            .data(d3.range(1))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg12.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=0)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["1/1","0","0","0","0"]
        svg12.selectAll("text")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg12.append("text")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")
    }
    long1()
</script>
</div></div>
</div>
<p>With this selection, the customer (🤔) will always pick the new table.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;long2()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;long2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">long2</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#long2&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg13</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#long2&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg13</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg13</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">1</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;1/1&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg13</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg13</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg13</span><span class="p">,</span><span class="mf">0</span><span class="p">)</span>

    <span class="p">}</span>
    <span class="nx">long2</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="long2()" value="Run Animation">
<div id="long2"></div>

<script type="text/javascript">   
    function long2() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#long2").select("svg").remove()
        var svg13 = d3.select("div#long2").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg13.selectAll("line")
            .data(d3.range(2))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg13.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=1)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["0","1/1","0","0","0"]
        svg13.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg13.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg13,0)

    }
    long2()
</script>
</div></div>
</div>
<p>Repeat for all customers (🤔).</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;long5()&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Run Animation&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;long5&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">function</span> <span class="nx">long5</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">55</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#long5&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="kd">var</span> <span class="nx">svg16</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#long5&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>

        <span class="nx">svg16</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;darkgrey&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;10px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-linecap&quot;</span><span class="p">,</span><span class="s2">&quot;round&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>    

        <span class="nx">svg16</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;=</span><span class="mf">4</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;white&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>

        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">]</span>
        <span class="nx">svg16</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">0</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
        
        
        
        <span class="nx">svg16</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;hungry&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;50px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">i</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">40</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg16</span><span class="p">,</span><span class="mf">0</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">1</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg16</span><span class="p">,</span><span class="mf">1</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">2</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">2</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg16</span><span class="p">,</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">3</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">3</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg16</span><span class="p">,</span><span class="mf">3</span><span class="p">)</span>

    <span class="p">}</span>
    <span class="nx">long5</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" onclick="long5()" value="Run Animation">
<div id="long5"></div>

<script type="text/javascript">   
    function long5() {
        var width = 600
        var height = 300
        var margin = 55
        var radius = 200

        d3.select("div#long5").select("svg").remove()
        var svg16 = d3.select("div#long5").append("svg")
            .attr("width", width)
            .attr("height", height)

        var x = d3.scaleLinear().domain([0,d3.range(5).length-1]).range([Math.PI, 2*Math.PI])

        svg16.selectAll("line")
            .data(d3.range(5))
            .join("line")
            .attr("x1", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y1", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("x2", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin)) 
            .style("stroke","darkgrey")
            .style("stroke-width", "10px")
            .style("stroke-linecap","round")
            .transition("line")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x2", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y2", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))    

        svg16.selectAll("circle")
            // Collect
            .data(d3.range(5))
            // Update
            .join("circle")
            .attr("cx", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .attr("r", (d,i)=> 30)
            .style("fill", (d,i)=> (i<=4)?"white":"black")
            .style("stroke", "black")
            .style("stroke-width", "1px")
            .transition("circle")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("cx", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("cy", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))

        fractions = ["0","0","0","0","1"]
        svg16.selectAll("text.perc")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc")
            .attr("x", (d,i)=> ((0) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((0) * Math.sin(x(i))) + (height-margin))  
            .style("font-size","30px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)
            .transition("text")
            .duration(1000)
            .delay((d,i)=> i * 100)
            .attr("x", (d,i)=> ((radius) * Math.cos(x(i))) + (width/2))
            .attr("y", (d,i)=> ((radius) * Math.sin(x(i))) + (height-margin))



        svg16.append("text")
            .attr("class","hungry")
            .attr("x", width/2)
            .attr("y", (height-margin))
            .style("font-size","50px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("🤔")

        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("x", cx)
                .attr("y", cy)  
                .style("font-size","30px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> i * 100)
                .attr("x", (d,i)=> ((40) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((40) * Math.sin(xc(i))) + cy)


        }
        var cx = ((radius) * Math.cos(x(0))) + (width/2)
        var cy = ((radius) * Math.sin(x(0))) + (height-margin)
        addPeople(cx,cy,1,svg16,0)
        var cx = ((radius) * Math.cos(x(1))) + (width/2)
        var cy = ((radius) * Math.sin(x(1))) + (height-margin)
        addPeople(cx,cy,1,svg16,1)
        var cx = ((radius) * Math.cos(x(2))) + (width/2)
        var cy = ((radius) * Math.sin(x(2))) + (height-margin)
        addPeople(cx,cy,1,svg16,2)
        var cx = ((radius) * Math.cos(x(3))) + (width/2)
        var cy = ((radius) * Math.sin(x(3))) + (height-margin)
        addPeople(cx,cy,1,svg16,3)

    }
    long5()
</script>
</div></div>
</div>
</div>
</div>
<div class="section" id="the-conclusions">
<h2>The Conclusions<a class="headerlink" href="#the-conclusions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="st-conclusion">
<h3>✨1st Conclusion✨<a class="headerlink" href="#st-conclusion" title="Permalink to this headline">¶</a></h3>
<p>So, let’s take a look at all three of these scenario results.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;✨1st Conclusion✨&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;font-size:20px&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;conclusion1()&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;conc&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">var</span> <span class="nx">svg17</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span>
    <span class="kd">function</span> <span class="nx">conclusion1</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">equation</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;+&quot;</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">,</span><span class="s2">&quot;= 1&quot;</span><span class="p">]</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">3</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">row</span><span class="p">)=&gt;{</span>
            <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.equ_&quot;</span><span class="o">+</span><span class="nx">row</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">equation</span><span class="p">)</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;equ_&quot;</span><span class="o">+</span><span class="nx">row</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="nx">row</span><span class="p">))</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span> 
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;text2&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">delay</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="mf">5</span><span class="o">-</span><span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="mf">100</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">==</span><span class="mf">4</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">))</span> <span class="o">:</span> <span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            
        <span class="p">})</span>


    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">conc</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">400</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">65</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="nx">svg17</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">width</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">6</span><span class="p">])</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span>
        
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">]</span>
        <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle.row1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;row1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            
        <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc1&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>

        
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">]</span>
        <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle.row2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;row2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>

        <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc2&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>

        
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">]</span>
        <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle.row3&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;row3&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>

        <span class="nx">svg17</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc3&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc3&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>

        
        <span class="nx">svg17</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;title1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">45</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;The Social Butterfly&quot;</span><span class="p">)</span>     
        
        <span class="nx">svg17</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;title1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">-</span><span class="mf">45</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;The Gambler&quot;</span><span class="p">)</span> 

        <span class="nx">svg17</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;title1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="mf">45</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;The Long Day&quot;</span><span class="p">)</span> 
        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">20</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">20</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>

        
            
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
        <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">4</span><span class="p">,</span><span class="nx">svg17</span><span class="p">,</span><span class="mf">0</span><span class="p">)</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">4</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">y</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span>
            <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg17</span><span class="p">,</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span>
            
        <span class="p">})</span>

        <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">4</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
            <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg17</span><span class="p">,</span><span class="nx">i</span><span class="o">+</span><span class="mf">6</span><span class="p">)</span>
            
        <span class="p">})</span>

    <span class="p">}</span>
    <span class="nx">conc</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" value="✨1st Conclusion✨" style="font-size:20px" onclick="conclusion1()">
<div id="conc"></div>

<script type="text/javascript">   
    var svg17, x, y
    function conclusion1() {
        var equation = ["+","+","+","+","= 1"]
        d3.range(3).forEach((d,row)=>{
            svg17.selectAll("text.equ_"+row)
                // Collect
                .data(equation)
                // Update
                .join("text")
                .attr("class","equ_"+row)
                .attr("x", 0)
                .attr("y", y(row))  
                .style("font-size","20px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>d) 
                .transition("text2")
                .duration(1000)
                .delay((d,i)=> (5-i) * 100)
                .attr("x", (d,i)=> (i==4) ? (x(i+1)) : (x(i)+x(i+1))/2)

        })


    }
    function conc() {
        var width = 600
        var height = 400
        var margin = 65
        var radius = 200

        d3.select("div#conc").select("svg").remove()
        svg17 = d3.select("div#conc").append("svg")
            .attr("width", width)
            .attr("height", height)

        x = d3.scaleLinear().range([margin,width-margin]).domain([0,6])
        y = d3.scaleLinear().range([margin,height-margin]).domain([0,2])

        fractions = ["1","0","0","0","0"]
        svg17.selectAll("circle.row1")
            .data(fractions)
            .join("circle")
            .attr("class","row1")
            .attr("cx", (d,i)=> x(i))
            .attr("cy", y(0))  
            .attr("r", 20)
            .style("fill", "white")
            .style("stroke", "black")
            .style("stroke-width", "1px")

        svg17.selectAll("text.perc1")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc1")
            .attr("x", (d,i)=> x(i))
            .attr("y", y(0))  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)


        fractions = ["1/5","1/5","1/5","1/5","1/5"]
        svg17.selectAll("circle.row2")
            .data(fractions)
            .join("circle")
            .attr("class","row2")
            .attr("cx", (d,i)=> x(i))
            .attr("cy", y(1))  
            .attr("r", 20)
            .style("fill", "white")
            .style("stroke", "black")
            .style("stroke-width", "1px")

        svg17.selectAll("text.perc2")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc2")
            .attr("x", (d,i)=> x(i))
            .attr("y", y(1))  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)


        fractions = ["0","0","0","0","1"]
        svg17.selectAll("circle.row3")
            .data(fractions)
            .join("circle")
            .attr("class","row3")
            .attr("cx", (d,i)=> x(i))
            .attr("cy", y(2))  
            .attr("r", 20)
            .style("fill", "white")
            .style("stroke", "black")
            .style("stroke-width", "1px")

        svg17.selectAll("text.perc3")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("class","perc3")
            .attr("x", (d,i)=> x(i))
            .attr("y", y(2))  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)


        svg17.append("text")
            .attr("class","title1")
            .attr("x", 20)
            .attr("y", y(0)-45)  
            .style("font-size","20px")
            .style("alignment-baseline","middle")
            .text("The Social Butterfly")     

        svg17.append("text")
            .attr("class","title1")
            .attr("x", 20)
            .attr("y", y(1)-45)  
            .style("font-size","20px")
            .style("alignment-baseline","middle")
            .text("The Gambler") 

        svg17.append("text")
            .attr("class","title1")
            .attr("x", 20)
            .attr("y", y(2)-45)  
            .style("font-size","20px")
            .style("alignment-baseline","middle")
            .text("The Long Day") 

        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("x", (d,i)=> ((20) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((20) * Math.sin(xc(i))) + cy)
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>"😃")



        }
        var cx = x(0)
        var cy = y(0)
        addPeople(cx,cy,4,svg17,0)

        d3.range(4).forEach((d,i) => {
            var cx = x(i)
            var cy = y(1)
            addPeople(cx,cy,1,svg17,i+1)

        })

        d3.range(4).forEach((d,i) => {
            var cx = x(i)
            var cy = y(2)
            addPeople(cx,cy,1,svg17,i+6)

        })

    }
    conc()
</script>
</div></div>
</div>
<p>Our ✨1st Conclusion✨ is that for each scenario, the total probabilities (when added together) equal 1. This conclusion is our first connection to the <em>Dirichlet Distribution</em>.</p>
<div class="tip admonition">
<p class="admonition-title">Dirichlet Distribution Always Sum to 1</p>
<p>Regardless of the number of tables (⚪), the number of people at the tables (😃), or a hungry persons’ (🤔) strategy. The total probability will be 1. This concept is also considered to be a <em>probability mass function</em> or PMF property.</p>
</div>
</div>
<div class="section" id="nd-conclusion">
<h3>✨2nd Conclusion✨<a class="headerlink" href="#nd-conclusion" title="Permalink to this headline">¶</a></h3>
<p>This easiest to see with our “The Gambler” scenerio.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;✨2nd Conclusion✨&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;font-size:20px&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;conclusion2()&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;conc2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">var</span> <span class="nx">svg18</span><span class="p">,</span> <span class="nx">secx</span><span class="p">,</span> <span class="nx">secy</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
    <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">300</span>
    <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">65</span>
    <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>
    <span class="kd">function</span> <span class="nx">conclusion2</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">conc2</span><span class="p">()</span>
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle#face_4&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move1&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text#face_4&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">5</span><span class="p">))</span>
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text#feed_5&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move2b&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">5</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span> <span class="o">+</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span> <span class="o">+</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;purple&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move3&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span> <span class="o">-</span> <span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span> <span class="o">+</span> <span class="mf">10</span><span class="p">)</span>
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">6</span><span class="p">)</span> <span class="o">+</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">4</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">6</span><span class="p">)</span> <span class="o">+</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">4</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;steelblue&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move4&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">4</span><span class="p">)</span> <span class="o">-</span> <span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">6</span><span class="p">)</span> <span class="o">+</span> <span class="mf">10</span><span class="p">)</span>
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="o">-</span> <span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;To Join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move5&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span> <span class="o">+</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span> 
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">width</span> <span class="o">+</span> <span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Or Not To Join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move6&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">6</span><span class="p">)</span> <span class="o">+</span> <span class="nx">secx</span><span class="p">(</span><span class="mf">4</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span> 
        
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;join&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="nx">secx</span><span class="p">(</span><span class="mf">4</span><span class="p">)</span> <span class="o">-</span> <span class="mf">10</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span> <span class="o">+</span> <span class="mf">10</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move6&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">secy</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
        
        
        <span class="kd">function</span> <span class="nx">createEquation1</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">top</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">top</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move6&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="mf">15</span><span class="p">)</span>
            
            <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">top</span> <span class="o">==</span> <span class="s2">&quot;🤔&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;steelblue&quot;</span> <span class="o">:</span> <span class="s2">&quot;purple&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move7&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">cy</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move8&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>
            
            <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;10px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;😃😃😃😃🤔&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move8&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">+</span><span class="mf">15</span><span class="p">)</span>
            
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">createEquation2</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">top</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">svg18</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,(</span><span class="nx">top</span><span class="o">==</span><span class="s2">&quot;= 1&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;30px&quot;</span> <span class="o">:</span> <span class="s2">&quot;20px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">top</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="s2">&quot;move6&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>

        <span class="p">}</span>
        <span class="nx">createEquation1</span><span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">0</span><span class="p">),</span><span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
        <span class="nx">createEquation2</span><span class="p">((</span><span class="nx">secx</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">+</span><span class="nx">secx</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
        
        <span class="nx">createEquation1</span><span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">1</span><span class="p">),</span><span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
        <span class="nx">createEquation2</span><span class="p">((</span><span class="nx">secx</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="nx">secx</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>        
        
        <span class="nx">createEquation1</span><span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
        <span class="nx">createEquation2</span><span class="p">((</span><span class="nx">secx</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">+</span><span class="nx">secx</span><span class="p">(</span><span class="mf">3</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
        
        <span class="nx">createEquation1</span><span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">3</span><span class="p">),</span><span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>
        <span class="nx">createEquation2</span><span class="p">((</span><span class="nx">secx</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span><span class="o">+</span><span class="nx">secx</span><span class="p">(</span><span class="mf">4</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
        
        <span class="nx">createEquation1</span><span class="p">(</span><span class="nx">secx</span><span class="p">(</span><span class="mf">5</span><span class="p">),</span><span class="nx">secy</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="s2">&quot;🤔&quot;</span><span class="p">)</span>
        <span class="nx">createEquation2</span><span class="p">((</span><span class="nx">secx</span><span class="p">(</span><span class="mf">6</span><span class="p">)),</span><span class="s2">&quot;= 1&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">conc2</span><span class="p">()</span> <span class="p">{</span>
        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc2&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="nx">svg18</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc2&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="nx">secx</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">width</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">6</span><span class="p">])</span>
        <span class="nx">secy</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span>
        

        
        <span class="nx">fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">,</span><span class="s2">&quot;1/5&quot;</span><span class="p">]</span>
        <span class="nx">svg18</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle.row2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="s2">&quot;face_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;row2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">secx</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>

        <span class="nx">svg18</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.perc2&quot;</span><span class="p">)</span>
            <span class="c1">// Collect</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">fractions</span><span class="p">)</span>
            <span class="c1">// Update</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="s2">&quot;face_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;perc2&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="nx">secx</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;20px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
        

        



        
        <span class="kd">function</span> <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xc</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">length</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="mf">3</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="c1">// Collect</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">e</span><span class="p">))</span>
                <span class="c1">// Update</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;feed_&quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">20</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cx</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">((</span><span class="mf">20</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">xc</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="nx">cy</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;(</span><span class="nx">c</span><span class="o">==</span><span class="mf">5</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;🤔&quot;</span><span class="o">:</span><span class="s2">&quot;😃&quot;</span><span class="p">)</span>

        
            
        <span class="p">}</span>

        
        <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">secx</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">secy</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
            <span class="nx">addPeople</span><span class="p">(</span><span class="nx">cx</span><span class="p">,</span><span class="nx">cy</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="nx">svg18</span><span class="p">,</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span>
            
        <span class="p">})</span>



    <span class="p">}</span>
    <span class="nx">conc2</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><input type="button" value="✨2nd Conclusion✨" style="font-size:20px" onclick="conclusion2()">
<div id="conc2"></div>

<script type="text/javascript">   
    var svg18, secx, secy
    var width = 600
    var height = 300
    var margin = 65
    var radius = 200
    function conclusion2() {
        conc2()
        svg18.selectAll("circle#face_4")
            .transition("move1")
            .duration(1000)
            .attr("cx", (d,i)=> secx(5))

        svg18.selectAll("text#face_4")
            .transition("move2")
            .duration(1000)
            .attr("x", (d,i)=> secx(5))

        svg18.selectAll("text#feed_5")
            .transition("move2b")
            .duration(1000)
            .attr("x", (d,i)=> secx(5)-20)

        svg18.append("line")
            .attr("id","join")
            .attr("x1", (x(3) + secx(0))/2)
            .attr("y1", (secy(1)+secy(0))/2)
            .attr("x2", (x(3) + secx(0))/2)
            .attr("y2", (secy(1)+secy(0))/2)
            .style("stroke", "purple")
            .style("stroke-width", "3px")
            .transition("move3")
            .duration(1000)
            .attr("x1", secx(0) - 10)
            .attr("x2", secx(3) + 10)

        svg18.append("line")
            .attr("id","join")
            .attr("x1", (secx(6) + secx(4))/2)
            .attr("y1", (secy(1)+secy(0))/2)
            .attr("x2", (secx(6) + secx(4))/2)
            .attr("y2", (secy(1)+secy(0))/2)
            .style("stroke", "steelblue")
            .style("stroke-width", "3px")
            .transition("move4")
            .duration(1000)
            .attr("x1", secx(4) - 10)
            .attr("x2", secx(6) + 10)

        svg18.append("text")
            .attr("id","join")
            .attr("x", (d,i)=> - 10)
            .attr("y", secy(1))  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("To Join")
            .transition("move5")
            .duration(1000)
            .attr("x", (secx(3) + secx(0))/2) 

        svg18.append("text")
            .attr("id","join")
            .attr("x", (d,i)=> width + 10)
            .attr("y", secy(1))  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("Or Not To Join")
            .transition("move6")
            .duration(1000)
            .attr("x", (secx(6) + secx(4))/2) 

        svg18.append("text")
            .attr("id","join")
            .attr("x", (d,i)=> ((secx(4) - 10)+(secx(3) + 10))/2)
            .attr("y", -10)  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("+")
            .transition("move6")
            .duration(1000)
            .attr("y", (secy(1)+secy(0))/2)


        function createEquation1(cx,cy,top) {
            svg18.append("text")
                .attr("x", cx)
                .attr("y", height+10)  
                .style("font-size","20px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(top)
                .transition("move6")
                .duration(1000)
                .attr("y", secy(2)-15)

            svg18.append("line")
                .attr("x1", cx)
                .attr("y1", 0)  
                .attr("x2", cx)
                .attr("y2", 0)
                .style("stroke", (top == "🤔") ? "steelblue" : "purple")
                .style("stroke-width", "3px")
                .transition("move7")
                .duration(1000)
                .attr("y1", cy)
                .attr("y2", cy)
                .transition("move8")
                .duration(1000)
                .attr("x1", cx-20)
                .attr("x2", cx+20)

            svg18.append("text")
                .attr("x", cx)
                .attr("y", height+10)  
                .style("font-size","10px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text("😃😃😃😃🤔")
                .transition("move8")
                .duration(1000)
                .attr("y", secy(2)+15)

        }
        function createEquation2(cx,top) {
            svg18.append("text")
                .attr("x", cx)
                .attr("y", height+10)  
                .style("font-size",(top=="= 1") ? "30px" : "20px")
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(top)
                .transition("move6")
                .duration(1000)
                .attr("y", secy(2))

        }
        createEquation1(secx(0),secy(2),"😃")
        createEquation2((secx(0)+secx(1))/2,"+")

        createEquation1(secx(1),secy(2),"😃")
        createEquation2((secx(1)+secx(2))/2,"+")        

        createEquation1(secx(2),secy(2),"😃")
        createEquation2((secx(2)+secx(3))/2,"+")

        createEquation1(secx(3),secy(2),"😃")
        createEquation2((secx(3)+secx(4))/2,"+")

        createEquation1(secx(5),secy(2),"🤔")
        createEquation2((secx(6)),"= 1")
    }
    function conc2() {

        d3.select("div#conc2").select("svg").remove()
        svg18 = d3.select("div#conc2").append("svg")
            .attr("width", width)
            .attr("height", height)

        secx = d3.scaleLinear().range([margin,width-margin]).domain([0,6])
        secy = d3.scaleLinear().range([margin,height-margin]).domain([0,2])



        fractions = ["1/5","1/5","1/5","1/5","1/5"]
        svg18.selectAll("circle.row2")
            .data(fractions)
            .join("circle")
            .attr("id",(d,i)=> "face_"+i)
            .attr("class","row2")
            .attr("cx", (d,i)=> secx(i))
            .attr("cy", secy(0))  
            .attr("r", 20)
            .style("fill", "white")
            .style("stroke", "black")
            .style("stroke-width", "1px")

        svg18.selectAll("text.perc2")
            // Collect
            .data(fractions)
            // Update
            .join("text")
            .attr("id",(d,i)=> "face_"+i)
            .attr("class","perc2")
            .attr("x", (d,i)=> secx(i))
            .attr("y", secy(0))  
            .style("font-size","20px")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text(d=>d)







        function addPeople(cx,cy,e,s,c) {
            var xc = d3.scaleLinear().domain([0,d3.range(e).length]).range([Math.PI, 3*Math.PI])
            s.selectAll("text.feed_"+c)
                // Collect
                .data(d3.range(e))
                // Update
                .join("text")
                .attr("class","feed_"+c)
                .attr("id","feed_"+c)
                .attr("x", (d,i)=> ((20) * Math.cos(xc(i))) + cx)
                .attr("y", (d,i)=> ((20) * Math.sin(xc(i))) + cy)
                .style("text-anchor", "middle")
                .style("alignment-baseline","middle")
                .text(d=>(c==5)?"🤔":"😃")



        }


        d3.range(5).forEach((d,i) => {
            var cx = secx(i)
            var cy = secy(0)
            addPeople(cx,cy,1,svg18,i+1)

        })



    }
    conc2()
</script>
</div></div>
</div>
<div class="tip admonition">
<p class="admonition-title">When All Possibility Are Equally Likely</p>
<p>In situations where are all possibilities are equally likely (equally likely to sit at a table with someone else (⚪&amp;😃) or sit at a new table (⚪)), we can abbreviate this to a simple probablity:</p>
<p><span class="math notranslate nohighlight">\(\frac{😃}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( = \)</span>
<span class="math notranslate nohighlight">\(\frac{\text{Number of people sitting at table (⚪&amp;😃)}}{\text{All people (😃😃😃😃🤔)}}\)</span>
<span class="math notranslate nohighlight">\( = \)</span>
<span class="math notranslate nohighlight">\(\frac{N_j}{N}\)</span></p>
<p>AND</p>
<p><span class="math notranslate nohighlight">\(\frac{🤔}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( = \)</span>
<span class="math notranslate nohighlight">\(\frac{\text{Number of people who can sit at a new table (⚪)}}{\text{All people (😃😃😃😃🤔)}}\)</span>
<span class="math notranslate nohighlight">\( = \)</span>
<span class="math notranslate nohighlight">\(\frac{1}{N}\)</span></p>
</div>
<div class="tip admonition">
<p class="admonition-title">To Join Or Not To Join</p>
<p>As shown in the animation, there are two conditions: to join <em>or</em> not to join. Both of these take advantage of the <span class="math notranslate nohighlight">\(\frac{N_j}{N}\)</span> relationship, but it can be seen that as tables are filled, the more likely this could occur. Meaning…</p>
<p><em>To join</em></p>
<p><span class="math notranslate nohighlight">\(\frac{😃}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( + \)</span>
<span class="math notranslate nohighlight">\(\frac{😃}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( + \)</span>
<span class="math notranslate nohighlight">\(\frac{😃}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( + \)</span>
<span class="math notranslate nohighlight">\(\frac{😃}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( + \)</span>
<span class="math notranslate nohighlight">\( = \)</span>
<span class="math notranslate nohighlight">\(\frac{N-1}{N}\)</span></p>
<p><em>Or Not To Join</em></p>
<p><span class="math notranslate nohighlight">\(\frac{🤔}{😃😃😃😃🤔}\)</span>
<span class="math notranslate nohighlight">\( = \)</span>
<span class="math notranslate nohighlight">\(\frac{1}{N}\)</span></p>
</div>
<p>To expand on this idea, we need to look at more of a real situation. Where someone entering the restaurant is making a decision and not the extremes. In the visualization below, click on the tables to add people to that table. We are introducing a new concept as well. That being a probability (p). The first table, before anyone is seated, will be  <span class="math notranslate nohighlight">\(\frac{p}{p} = 1 \)</span>. Meaning, if we change this probability to any number, the math will always work out. Then as we add people to tables, we will keep expanding on this introduction of the probability.</p>
<p>Remember, for each table, we are saying <span class="math notranslate nohighlight">\(\frac{N_j}{N}\)</span>, where <span class="math notranslate nohighlight">\(N_j = \text{Number of people sitting at table j (}⚪_j\text{&amp;😃)}\)</span> and <span class="math notranslate nohighlight">\(N = \text{All people (😃😃😃😃🤔)}\)</span> = <span class="math notranslate nohighlight">\(\frac{\text{Number of people sitting at table (⚪&amp;😃)}}{\text{All people (😃😃😃😃🤔)}}\)</span></p>
<p>Also, <span class="math notranslate nohighlight">\(\frac{\text{Number of people who can sit at a new table (⚪)}}{\text{All people (😃😃😃😃🤔)}}\)</span>  <span class="math notranslate nohighlight">\( = \frac{1}{N}\)</span></p>
<p>or simply
<span class="math notranslate nohighlight">\(\frac{N_j}{N} + \frac{1}{N} = 1\)</span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the next animation, click on the circles to add new people.</p>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;conc3&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">var</span> <span class="nx">svg19</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span>
    
    <span class="kd">function</span> <span class="nx">conc3</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">260</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">60</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>

        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc3&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="nx">svg19</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc3&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="nx">x3</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">width</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">9</span><span class="p">])</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span>

        <span class="nx">data</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="mf">0</span><span class="p">)</span>
        <span class="nx">counter</span> <span class="o">=</span> <span class="mf">0</span>
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.numerator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;numerator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
        
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.vinculum&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;vinculum&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>     
        
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.denominator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;denominator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
        
        
        
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_num&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;nj_num&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
        
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_num_sub&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;nj_num_sub&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="mf">6</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span><span class="s2">&quot;.5rem&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
        
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.nj_vin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;nj_vin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>     
        
        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_den&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;nj_den&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>

        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text_nj_plus&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;text_nj_plus&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="p">((</span><span class="nx">x3</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="o">-</span><span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">i</span><span class="o">==</span><span class="mf">9</span><span class="p">)</span><span class="o">?</span> <span class="s2">&quot;= 1&quot;</span><span class="o">:</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
        
        <span class="nx">svg19</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;tojoin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;purple&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span>   

        <span class="nx">svg19</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;tojoin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">.75</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;To Join&quot;</span><span class="p">)</span>

        <span class="nx">svg19</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;ornot&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;steelblue&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span> 
        
        <span class="nx">svg19</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;ornot&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">.75</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Not To Join&quot;</span><span class="p">)</span>

        <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill-opacity&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">i</span><span class="o">==</span><span class="mf">9</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;darkgrey&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>   
                    <span class="kd">const</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">).</span><span class="nx">nodes</span><span class="p">();</span>
                    <span class="kd">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">9</span><span class="p">)</span> <span class="p">{</span>
                    <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">add</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">:</span> <span class="nx">update</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

                <span class="p">}</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mouseover&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>   
                    <span class="kd">const</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">).</span><span class="nx">nodes</span><span class="p">();</span>
                    <span class="kd">const</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">9</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">e</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mouseout&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span> 
                <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
            <span class="p">})</span>
        
        <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">counter</span><span class="o">++</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="mf">0</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;p&quot;</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;line.tojoin&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>    
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text.tojoin&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="nx">x3</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;line.ornot&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text.ornot&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">))</span>
            
            

 
            <span class="nx">updateGraph</span><span class="p">()</span>

        <span class="p">}</span>    
        <span class="kd">function</span> <span class="nx">update</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">counter</span><span class="o">++</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="mf">0</span>
            <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span>
            
            <span class="nx">updateGraph</span><span class="p">()</span>
        <span class="p">}</span>
        
        <span class="kd">function</span> <span class="nx">updateGraph</span><span class="p">(){</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>

            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.numerator&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.vinculum&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.denominator&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">counter</span><span class="o">+</span><span class="s2">&quot;+p&quot;</span><span class="p">)</span>
            
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_num&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">d</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;p&quot;</span> <span class="o">:</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_num_sub&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">8</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">d</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">i</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.nj_vin&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>  
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>
            
            <span class="nx">svg19</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_den&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x3</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;N+p&quot;</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="c1">//update()</span>


    <span class="p">}</span>
    <span class="nx">conc3</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><div id="conc3"></div>

<script type="text/javascript">   
    var svg19, x3, y3

    function conc3() {
        var width = 600
        var height = 260
        var margin = 60
        var radius = 200

        d3.select("div#conc3").select("svg").remove()
        svg19 = d3.select("div#conc3").append("svg")
        .attr("width", width)
        .attr("height", height)

        x3 = d3.scaleLinear().range([margin,width-margin]).domain([0,9])
        y = d3.scaleLinear().range([margin,height-margin]).domain([0,2])

        data = d3.range(10).map(d=>0)
        counter = 0
        svg19.selectAll("text.numerator")
            .data(data)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","numerator")
            .attr("x", (d,i)=> (i!=0) ? width+20 : x3(i))
            .attr("y", y(0)-10)  
            .attr("r", 30)
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("p")

        svg19.selectAll("line.vinculum")
            .data(data)
            .join("line")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","vinculum")
            .attr("x1", (d,i)=> (i!=0) ? (width+20)-10 : x3(i)-10)
            .attr("y1", y(0))  
            .attr("x2", (d,i)=> (i!=0) ? (width+20)+10 : x3(i)+10)
            .attr("y2", y(0))  
            .style("stroke", "black")
            .style("stroke-width", "1px")     

        svg19.selectAll("text.denominator")
            .data(data)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","denominator")
            .attr("x", (d,i)=> (i!=0) ? width+20 : x3(i))
            .attr("y", y(0)+10)  
            .attr("r", 30)
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("p")



        svg19.selectAll("text.nj_num")
            .data(data)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","nj_num")
            .attr("x", width+30)
            .attr("y", y(2)-10)  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")

        svg19.selectAll("text.nj_num_sub")
            .data(data)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","nj_num_sub")
            .attr("x", width+30)
            .attr("y", y(2)-6)  
            .style("font-size",".5rem")
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")

        svg19.selectAll("line.nj_vin")
            .data(data)
            .join("line")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","nj_vin")
            .attr("x1", width+30)
            .attr("y1", y(2))  
            .attr("x2", width+30)
            .attr("y2", y(2))  
            .style("stroke", "black")
            .style("stroke-width", "1px")     

        svg19.selectAll("text.nj_den")
            .data(data)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","nj_den")
            .attr("x", width+30)
            .attr("y", y(2)+10)  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")

        svg19.selectAll("text_nj_plus")
            .data(data)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","text_nj_plus")
            .attr("x", (d,i)=>x3(i)+((x3(1)-x3(0))/2))
            .attr("y", y(2))  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text((d,i)=>(i==9)? "= 1":"+")

        svg19
            .append("line")
            .attr("class","tojoin")
            .attr("x1", x3(0))
            .attr("y1", y(.5))  
            .attr("x2", x3(0))
            .attr("y2", y(.5))  
            .style("stroke", "purple")
            .style("stroke-width", "3px")   

        svg19
            .append("text")
            .attr("class","tojoin")
            .attr("x", -30)
            .attr("y", y(.75))  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("To Join")

        svg19
            .append("line")
            .attr("class","ornot")
            .attr("x1", x3(0)-20)
            .attr("y1", y(.5))  
            .attr("x2", x3(0)+20)
            .attr("y2", y(.5))  
            .style("stroke", "steelblue")
            .style("stroke-width", "3px") 

        svg19
            .append("text")
            .attr("class","ornot")
            .attr("x", width+30)
            .attr("y", y(.75))  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("Not To Join")

        svg19.selectAll("circle")
            .data(data)
            .join("circle")
            .attr("id", (d,i)=>"row_"+i)
            .attr("cx", (d,i)=> (i!=0) ? width+20 : x3(i))
            .attr("cy", y(0))  
            .attr("r", 30)
            .style("fill", "white")
            .style("fill-opacity", 0)
            .style("stroke", (d,i)=>(i==9)?"darkgrey":"black")
            .style("stroke-width", "1px")
            .on("click", function(event, d) {   
                    const e = svg19.selectAll("circle").nodes();
                    const i = e.indexOf(this);
                if (i!=9) {
                    (data[i+1]==0) ? add(i) : update(i)

                }
            })
            .on("mouseover", function(event, d) {   
                    const e = svg19.selectAll("circle").nodes();
                    const i = e.indexOf(this);
                if (i!=9) {
                    d3.select(e[i]).style("stroke-width", "3px")
                }
            })
            .on("mouseout", function(event, d) { 
                svg19.selectAll("circle").style("stroke-width", "1px")
            })

        function add(i) {
            counter++
            if (data[i]=="p") data[i]=0
            data[i+1] = "p"
            data[i] = data[i] + 1

            svg19.select("line.tojoin")
                .transition()
                .attr("x1", x3(0)-20)
                .attr("x2", x3(i)+20)    

            svg19.select("text.tojoin")
                .transition()
                .attr("x", (x3(i)+x3(0))/2)

            svg19.select("line.ornot")
                .transition()
                .attr("x1", x3(i+1)-20)
                .attr("x2", x3(i+1)+20)

            svg19.select("text.ornot")
                .transition()
                .attr("x", x3(i+1))




            updateGraph()

        }    
        function update(i) {
            counter++
            if (data[i]=="p") data[i]=0
            data[i] = data[i] + 1

            updateGraph()
        }

        function updateGraph(){

            svg19.selectAll("circle").data(data)
                .transition()
                .attr("cx", (d,i)=> (d==0) ? width+20 : x3(i))

            svg19.selectAll("text.numerator").data(data)
                .transition()
                .attr("x", (d,i)=> (d==0) ? width+20 : x3(i))
                .text(d=>d)

            svg19.selectAll("line.vinculum")
                .data(data)  
                .transition()
                .attr("x1", (d,i)=> (d==0) ? (width+20)-10 : x3(i)-10)
                .attr("x2", (d,i)=> (d==0) ? (width+20)+10 : x3(i)+10)

            svg19.selectAll("text.denominator").data(data)
                .transition()
                .attr("x", (d,i)=> (d==0) ? width+20 : x3(i))
                .text(counter+"+p")


            svg19.selectAll("text.nj_num").data(data)
                .transition()
                .attr("x", (d,i)=> (d==0) ? width+20 : x3(i))
                .text((d,i)=>(d=="p") ? "p" : "N")

            svg19.selectAll("text.nj_num_sub").data(data)
                .transition()
                .attr("x", (d,i)=> (d==0) ? width+20 : x3(i)+8)
                .text((d,i)=>(d=="p") ? "" : i)

            svg19.selectAll("line.nj_vin")
                .data(data)  
                .transition()
                .attr("x1", (d,i)=> (d==0) ? (width+20)-10 : x3(i)-10)
                .attr("x2", (d,i)=> (d==0) ? (width+20)+10 : x3(i)+10)

            svg19.selectAll("text.nj_den").data(data)
                .transition()
                .attr("x", (d,i)=> (d==0) ? width+20 : x3(i))
                .text("N+p")
        }
        //update()


    }
    conc3()
</script>
</div></div>
</div>
<p>This lines up perfectly with what we specified beforehand.</p>
<p><span class="math notranslate nohighlight">\(\frac{N_0}{N+p}+\frac{N_1}{N+p}+\frac{N_2}{N+p}+\frac{N_3}{N+p}+\frac{N_4}{N+p}+\frac{N_5}{N+p}+\frac{N_6}{N+p}+\frac{N_7}{N+p}+\frac{N_8}{N+p}+\frac{p}{N+p} = \)</span></p>
<p><span class="math notranslate nohighlight">\(\frac{N_0+N_1+N_2+N_3+N_4+N_5+N_6+N_7+N_8+p}{N+p} = \)</span> where <span class="math notranslate nohighlight">\(N_0+N_1+N_2+N_3+N_4+N_5+N_6+N_7+N_8 = N\)</span></p>
<p><span class="math notranslate nohighlight">\(\frac{N+p}{N+p} = 1\)</span></p>
<p>or, even better</p>
<div class="tip admonition">
<p class="admonition-title">The Predictive Probability</p>
<p>The Dirichlet has the predicitve probability of</p>
<p><span class="math notranslate nohighlight">\(\frac{N_j}{N+p} + \frac{p}{N+p} = 1\)</span></p>
<p>Where, traditionally, you will see p written as alpha (<span class="math notranslate nohighlight">\(\alpha\)</span>).</p>
<p>So…
<span class="math notranslate nohighlight">\(\frac{N_j}{N+\alpha} + \frac{\alpha}{N+\alpha} = 1\)</span></p>
</div>
</div>
<div class="section" id="the-rich-get-richer">
<h3>💰 The Rich Get Richer 💰<a class="headerlink" href="#the-rich-get-richer" title="Permalink to this headline">¶</a></h3>
<p>When dealing with the Dirichlet process, we are dealing with probabilities. As before, p or <span class="math notranslate nohighlight">\(\alpha\)</span>, represents a probability. In this case, the person entering will more than likely want to sit at a table and, more specifically, the table with the most people. This will rarely be as extreme as “The Social Butterfly,” but instead be represented by the <span class="math notranslate nohighlight">\(\frac{N_j}{N+\alpha} + \frac{\alpha}{N+\alpha} = 1\)</span> for each table.</p>
<p>In this next animation, we will simulate the same experience as above but more realistic to the Dirichlet process.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">td</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;text-align: left&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span> Changing Alpha Values <span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">td</span> <span class="na">rowspan</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;🍪Keep Clicking!🍪&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;font-size:20px&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;conclusion4()&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">td</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;text-align: left&quot;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph2&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;updatedProb(.2)&quot;</span><span class="p">&gt;</span> .2
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph2&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;updatedProb(1)&quot;</span> <span class="na">checked</span><span class="p">&gt;</span> 1
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph2&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;updatedProb(5)&quot;</span><span class="p">&gt;</span> 5
<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;conc4&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">var</span> <span class="nx">svg20</span><span class="p">,</span> <span class="nx">x4</span><span class="p">,</span> <span class="nx">y4</span>
    <span class="kd">var</span> <span class="nx">dataProb</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="mf">0</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mf">0</span>
    <span class="kd">var</span> <span class="nx">bary</span>
    <span class="kd">function</span> <span class="nx">conc4</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">600</span>
        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">400</span>
        <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">60</span>
        <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="mf">200</span>

        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc4&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="nx">svg20</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc4&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>

        <span class="nx">x4</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">width</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">9</span><span class="p">])</span>
        <span class="nx">y4</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span><span class="p">,</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.numerator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;numerator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.vinculum&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;vinculum&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>     
        
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.denominator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;denominator&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>

        <span class="nx">svg20</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;tojoin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;purple&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span>   

        <span class="nx">svg20</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;tojoin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">.75</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;To Join&quot;</span><span class="p">)</span>

        <span class="nx">svg20</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;ornot&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">.5</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;steelblue&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;3px&quot;</span><span class="p">)</span> 
        
        <span class="nx">svg20</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;ornot&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">+</span><span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">.75</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;alignment-baseline&quot;</span><span class="p">,</span><span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Not To Join&quot;</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="s2">&quot;row_&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span>  
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mf">30</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill-opacity&quot;</span><span class="p">,</span> <span class="mf">0</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">i</span><span class="o">==</span><span class="mf">9</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;darkgrey&quot;</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="s2">&quot;1px&quot;</span><span class="p">)</span>
        
        <span class="kd">var</span> <span class="nx">barx</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleBand</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">margin</span> <span class="p">,</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">]).</span><span class="nx">domain</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">barprobs</span><span class="p">[</span><span class="nx">d</span><span class="p">].</span><span class="nx">name</span><span class="p">)).</span><span class="nx">padding</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
        <span class="nx">bary</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">range</span><span class="p">([</span><span class="nx">y4</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span> <span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">1</span><span class="p">)]).</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">])</span>

        <span class="kd">var</span> <span class="nx">xAxis</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">axisBottom</span><span class="p">().</span><span class="nx">scale</span><span class="p">(</span><span class="nx">barx</span><span class="p">)</span>
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;axisx&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(0,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xAxis</span><span class="p">)</span> 

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="o">-</span><span class="mf">5</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Tables&quot;</span><span class="p">)</span>

        <span class="kd">var</span> <span class="nx">yAxis</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">axisLeft</span><span class="p">().</span><span class="nx">scale</span><span class="p">(</span><span class="nx">bary</span><span class="p">)</span>
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;axisy&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="nx">margin</span> <span class="o">+</span> <span class="s2">&quot;,0)&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">yAxis</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;rotate(-90,15,&quot;</span><span class="o">+</span><span class="p">(</span><span class="nx">y4</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="p">((</span><span class="nx">y4</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="nx">y4</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">15</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="p">((</span><span class="nx">y4</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span><span class="o">-</span><span class="nx">y4</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Count&quot;</span><span class="p">)</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">barprobs</span><span class="p">)</span>
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">barprobs</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="nx">barx</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="nx">bary</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span><span class="nx">barx</span><span class="p">.</span><span class="nx">bandwidth</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">height</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span> <span class="o">-</span> <span class="nx">bary</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="mf">2</span><span class="p">)</span> 
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;fill&quot;</span><span class="p">,</span> <span class="s2">&quot;steelblue&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="mf">9</span><span class="p">)</span> <span class="nx">probabilities</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span>
        <span class="nx">counter</span><span class="o">++</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="mf">0</span>
        <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;p&quot;</span>
        <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;line.tojoin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>    

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text.tojoin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="nx">x4</span><span class="p">(</span><span class="mf">0</span><span class="p">))</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;line.ornot&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span><span class="o">-</span><span class="mf">20</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text.ornot&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mf">1</span><span class="p">))</span>

        <span class="nx">updateGraph</span><span class="p">()</span>

    <span class="p">}</span>  
    <span class="kd">function</span> <span class="nx">update</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">counter</span><span class="o">++</span>
        <span class="nx">probabilities</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span><span class="mf">0</span>
        <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">dataProb</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span>

        <span class="nx">updateGraph</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">updateGraph</span><span class="p">(){</span>
        <span class="nx">bary</span><span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">barprobs</span><span class="p">,</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">)])</span>
        <span class="kd">var</span> <span class="nx">yAxis</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">axisLeft</span><span class="p">().</span><span class="nx">scale</span><span class="p">(</span><span class="nx">bary</span><span class="p">)</span>
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;g.axisy&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">yAxis</span><span class="p">)</span>
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">barprobs</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span><span class="nx">bary</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">y4</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span> <span class="o">-</span> <span class="nx">bary</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span>
        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.numerator&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;(</span><span class="nx">d</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">p</span> <span class="o">:</span> <span class="nx">d</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.vinculum&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.denominator&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">counter</span><span class="o">+</span><span class="s2">&quot;+&quot;</span><span class="o">+</span><span class="nx">p</span><span class="p">)</span>


        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_num&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">d</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nb">String</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_num_sub&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">8</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;(</span><span class="nx">d</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">i</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.nj_vin&quot;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">-</span><span class="mf">10</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="mf">20</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="o">+</span><span class="mf">10</span><span class="p">)</span>

        <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nj_den&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">dataProb</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;</span> <span class="p">(</span><span class="nx">d</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">width</span><span class="o">+</span><span class="mf">20</span> <span class="o">:</span> <span class="nx">x4</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
            <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;N+&quot;</span><span class="o">+</span><span class="nx">p</span><span class="p">)</span>
        
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">probabilities</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0</span><span class="p">]</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="mf">1</span>
    <span class="kd">var</span> <span class="nx">barprobs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">barprobs</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Table&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="nx">i</span><span class="p">}))</span>
    <span class="kd">function</span> <span class="nx">conclusion4</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">last</span> <span class="o">=</span> <span class="nx">probabilities</span><span class="p">[</span><span class="nx">probabilities</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span>
        <span class="nx">barprobs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">index</span><span class="o">==</span><span class="nx">last</span><span class="p">)[</span><span class="mf">0</span><span class="p">].</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">barprobs</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">index</span><span class="o">==</span><span class="nx">last</span><span class="p">)[</span><span class="mf">0</span><span class="p">].</span><span class="nx">value</span> <span class="o">+</span> <span class="mf">1</span>
        <span class="nx">temp</span> <span class="o">=</span> <span class="nx">createProbabilities</span><span class="p">(</span><span class="nx">probabilities</span><span class="p">)</span>
        <span class="nx">randomPick</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
        <span class="kd">var</span> <span class="nx">blah</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">randomPick</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dataProb</span><span class="p">[</span><span class="nx">blah</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span><span class="o">==</span><span class="mf">0</span><span class="p">)</span> <span class="nx">add</span><span class="p">(</span><span class="nx">blah</span><span class="p">)</span> 
        <span class="k">else</span> <span class="nx">update</span><span class="p">(</span><span class="nx">blah</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">updatedProb</span><span class="p">(</span><span class="nx">probability</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span> <span class="o">=</span> <span class="nx">probability</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#conc4&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">remove</span><span class="p">()</span>
        <span class="nx">probabilities</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0</span><span class="p">]</span>
        <span class="nx">barprobs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">barprobs</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;Table&quot;</span><span class="o">+</span><span class="nx">i</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="mf">0</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="nx">i</span><span class="p">}))</span>
        <span class="nx">dataProb</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="mf">0</span><span class="p">)</span>
        <span class="nx">counter</span> <span class="o">=</span> <span class="mf">0</span>
        <span class="nx">conc4</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">createProbabilities</span><span class="p">(</span><span class="nx">ps</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span> <span class="o">==</span> <span class="mf">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">ps</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="o">==</span><span class="mf">.2</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">ps</span><span class="p">)</span>
            <span class="nx">temp</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mf">0</span><span class="p">)</span>
            <span class="nx">temp</span><span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1</span>
            <span class="nx">ps</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">d</span> <span class="o">!=</span> <span class="nx">m</span><span class="p">)</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">e</span><span class="p">=&gt;</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span> <span class="p">)</span>
            <span class="p">})</span>
            <span class="nx">temp2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">t</span> <span class="k">in</span> <span class="nx">temp</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">temp</span><span class="p">[</span><span class="nx">t</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">e</span><span class="p">=&gt;</span> <span class="nx">temp2</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="o">+</span><span class="nx">t</span><span class="p">)</span> <span class="p">)</span>
                
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">temp2</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="o">==</span><span class="mf">5</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">ps</span><span class="p">)</span>
            <span class="nx">temp</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">=</span><span class="mf">0</span><span class="p">)</span>

            <span class="nx">ps</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">d</span> <span class="o">==</span> <span class="nx">m</span><span class="p">)</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">e</span><span class="p">=&gt;</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span> <span class="p">)</span>
                <span class="k">else</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span> <span class="o">+</span> <span class="mf">1</span>
            <span class="p">})</span>
            <span class="nx">temp2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">temp</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">t</span> <span class="k">in</span> <span class="nx">temp</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">temp</span><span class="p">[</span><span class="nx">t</span><span class="p">]).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">e</span><span class="p">=&gt;</span> <span class="nx">temp2</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="o">+</span><span class="nx">t</span><span class="p">)</span> <span class="p">)</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">temp2</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">conc4</span><span class="p">()</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><table>
<tr>
<td style="text-align: left">
<h4> Changing Alpha Values </h4>

</td>
<td rowspan="2">
<input type="button" value="🍪Keep Clicking!🍪" style="font-size:20px" onclick="conclusion4()">
</td>
</tr>
<tr>
<td style="text-align: left">

<input type="radio" name="graph2" onclick="updatedProb(.2)"> .2
<input type="radio" name="graph2" onclick="updatedProb(1)" checked> 1
<input type="radio" name="graph2" onclick="updatedProb(5)"> 5
</td>
</tr>
</table>
<div id="conc4"></div>

<script type="text/javascript">   
    var svg20, x4, y4
    var dataProb = d3.range(10).map(d=>0)
    var counter = 0
    var bary
    function conc4() {
        var width = 600
        var height = 400
        var margin = 60
        var radius = 200

        d3.select("div#conc4").select("svg").remove()
        svg20 = d3.select("div#conc4").append("svg")
        .attr("width", width)
        .attr("height", height)

        x4 = d3.scaleLinear().range([margin,width-margin]).domain([0,9])
        y4 = d3.scaleLinear().range([margin,height-margin]).domain([0,2])

        svg20.selectAll("text.numerator")
            .data(dataProb)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","numerator")
            .attr("x", (d,i)=> (i!=0) ? width+20 : x4(i))
            .attr("y", y4(0)-10)  
            .attr("r", 30)
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("1")

        svg20.selectAll("line.vinculum")
            .data(dataProb)
            .join("line")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","vinculum")
            .attr("x1", (d,i)=> (i!=0) ? (width+20)-10 : x4(i)-10)
            .attr("y1", y4(0))  
            .attr("x2", (d,i)=> (i!=0) ? (width+20)+10 : x4(i)+10)
            .attr("y2", y4(0))  
            .style("stroke", "black")
            .style("stroke-width", "1px")     

        svg20.selectAll("text.denominator")
            .data(dataProb)
            .join("text")
            .attr("id", (d,i)=>"row_"+i)
            .attr("class","denominator")
            .attr("x", (d,i)=> (i!=0) ? width+20 : x4(i))
            .attr("y", y4(0)+10)  
            .attr("r", 30)
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("1")

        svg20
            .append("line")
            .attr("class","tojoin")
            .attr("x1", x4(0))
            .attr("y1", y4(.5))  
            .attr("x2", x4(0))
            .attr("y2", y4(.5))  
            .style("stroke", "purple")
            .style("stroke-width", "3px")   

        svg20
            .append("text")
            .attr("class","tojoin")
            .attr("x", -30)
            .attr("y", y4(.75))  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("To Join")

        svg20
            .append("line")
            .attr("class","ornot")
            .attr("x1", x4(0)-20)
            .attr("y1", y4(.5))  
            .attr("x2", x4(0)+20)
            .attr("y2", y4(.5))  
            .style("stroke", "steelblue")
            .style("stroke-width", "3px") 

        svg20
            .append("text")
            .attr("class","ornot")
            .attr("x", width+30)
            .attr("y", y4(.75))  
            .style("text-anchor", "middle")
            .style("alignment-baseline","middle")
            .text("Not To Join")

        svg20.selectAll("circle")
            .data(dataProb)
            .join("circle")
            .attr("id", (d,i)=>"row_"+i)
            .attr("cx", (d,i)=> (i!=0) ? width+20 : x4(i))
            .attr("cy", y4(0))  
            .attr("r", 30)
            .style("fill", "white")
            .style("fill-opacity", 0)
            .style("stroke", (d,i)=>(i==9)?"darkgrey":"black")
            .style("stroke-width", "1px")

        var barx = d3.scaleBand().range([margin , width - margin]).domain(d3.range(10).map(d=>barprobs[d].name)).padding(0)
        bary = d3.scaleLinear().range([y4(2) , y4(1)]).domain([0,1])

        var xAxis = d3.axisBottom().scale(barx)
        svg20.append("g")
            .attr("class", "axisx")
            .attr("transform", "translate(0," + (height-margin) + ")")
            .call(xAxis) 

        svg20.append("text")
            .attr("x", width/2)
            .attr("y", height-5)
            .style("text-anchor", "middle")
            .text("Tables")

        var yAxis = d3.axisLeft().scale(bary)
        svg20.append("g")
            .attr("class", "axisy")
            .attr("transform", "translate(" + margin + ",0)")
            .call(yAxis)

        svg20.append("text")
            .attr("transform", "rotate(-90,15,"+(y4(2)-((y4(2)-y4(1))/2))+")")
            .attr("x", 15)
            .attr("y", y4(2)-((y4(2)-y4(1))/2))
            .style("text-anchor", "middle")
            .text("Count")

        console.log(barprobs)
        svg20.append("g").selectAll("rect")
            .data(barprobs)
            .join("rect")
            .attr("x", (d,i)=>barx(d.name))
            .attr("y",(d,i)=>bary(d.value))
            .attr("width",barx.bandwidth)
            .attr("height", d => (height-margin) - bary(d.value))
            .style("stroke-width", 2) 
            .style("stroke","black")
            .style("fill", "steelblue")
            .append("title")
            .text(d=>d.value)
    }

    function add(i) {
        if (i!=9) probabilities.push(i+1)
        counter++
        if (dataProb[i]=="p") dataProb[i]=0
        dataProb[i+1] = "p"
        dataProb[i] = dataProb[i] + 1

        svg20.select("line.tojoin")
            .transition()
            .attr("x1", x4(0)-20)
            .attr("x2", x4(i)+20)    

        svg20.select("text.tojoin")
            .transition()
            .attr("x", (x4(i)+x4(0))/2)

        svg20.select("line.ornot")
            .transition()
            .attr("x1", x4(i+1)-20)
            .attr("x2", x4(i+1)+20)

        svg20.select("text.ornot")
            .transition()
            .attr("x", x4(i+1))

        updateGraph()

    }  
    function update(i) {
        counter++
        probabilities.push(i)
        if (dataProb[i]=="p") dataProb[i]=0
        dataProb[i] = dataProb[i] + 1

        updateGraph()
    }

    function updateGraph(){
        bary.domain([0,d3.max(barprobs,d=>d.value)])
        var yAxis = d3.axisLeft().scale(bary)
        svg20.select("g.axisy")
            .transition()
            .call(yAxis)
        svg20.selectAll("rect")
            .data(barprobs)
            .transition()
            .attr("y",(d,i)=>bary(d.value))
            .attr("height", d => y4(2) - bary(d.value))
        svg20.selectAll("circle").data(dataProb)
            .transition()
            .attr("cx", (d,i)=> (d==0) ? width+20 : x4(i))

        svg20.selectAll("text.numerator").data(dataProb)
            .transition()
            .attr("x", (d,i)=> (d==0) ? width+20 : x4(i))
            .text(d=>(d=="p") ? p : d)

        svg20.selectAll("line.vinculum")
            .data(dataProb)  
            .transition()
            .attr("x1", (d,i)=> (d==0) ? (width+20)-10 : x4(i)-10)
            .attr("x2", (d,i)=> (d==0) ? (width+20)+10 : x4(i)+10)

        svg20.selectAll("text.denominator").data(dataProb)
            .transition()
            .attr("x", (d,i)=> (d==0) ? width+20 : x4(i))
            .text(counter+"+"+p)


        svg20.selectAll("text.nj_num").data(dataProb)
            .transition()
            .attr("x", (d,i)=> (d==0) ? width+20 : x4(i))
            .text((d,i)=>(d=="p") ? String(p) : "N")

        svg20.selectAll("text.nj_num_sub").data(dataProb)
            .transition()
            .attr("x", (d,i)=> (d==0) ? width+20 : x4(i)+8)
            .text((d,i)=>(d=="p") ? "" : i)

        svg20.selectAll("line.nj_vin")
            .data(dataProb)  
            .transition()
            .attr("x1", (d,i)=> (d==0) ? (width+20)-10 : x4(i)-10)
            .attr("x2", (d,i)=> (d==0) ? (width+20)+10 : x4(i)+10)

        svg20.selectAll("text.nj_den").data(dataProb)
            .transition()
            .attr("x", (d,i)=> (d==0) ? width+20 : x4(i))
            .text("N+"+p)

    }
    var probabilities = [0]
    var p = 1
    var barprobs = []
    d3.range(10).forEach((d,i) => barprobs.push({"name":"Table"+i, "value": 0, "index":i}))
    function conclusion4() {
        last = probabilities[probabilities.length-1]
        barprobs.filter(d=>d.index==last)[0].value = barprobs.filter(d=>d.index==last)[0].value + 1
        temp = createProbabilities(probabilities)
        randomPick = Math.floor(Math.random() * temp.length)
        var blah = temp[randomPick]
        if (dataProb[blah+1]==0) add(blah) 
        else update(blah)
    }
    function updatedProb(probability) {
        p = probability
        d3.select("div#conc4").select("svg").remove()
        probabilities = [0]
        barprobs = []
        d3.range(10).forEach((d,i) => barprobs.push({"name":"Table"+i, "value": 0, "index":i}))
        dataProb = d3.range(10).map(d=>0)
        counter = 0
        conc4()
    }
    function createProbabilities(ps) {
        if (p == 1) return ps
        if (p==.2) {
            m = d3.max(ps)
            temp = {}
            d3.range(10).forEach(d=>temp[d]=0)
            temp[m] = 1
            ps.forEach(d=>{
                if (d != m) d3.range(5).forEach(e=> temp[d] = temp[d] + 1 )
            })
            temp2 = []
            for (t in temp) {
                d3.range(temp[t]).forEach(e=> temp2.push(+t) )

            }
            return temp2
        }
        if (p==5) {
            m = d3.max(ps)
            temp = {}
            d3.range(10).forEach(d=>temp[d]=0)

            ps.forEach(d=>{
                if (d == m) d3.range(5).forEach(e=> temp[d] = temp[d] + 1 )
                else temp[d] = temp[d] + 1
            })
            temp2 = []
            console.log(temp)
            for (t in temp) {
                d3.range(temp[t]).forEach(e=> temp2.push(+t) )
            }
            return temp2
        }
    }
    conc4()
</script>

</div></div>
</div>
</div>
</div>
<div class="section" id="actual-data">
<h2>Actual Data<a class="headerlink" href="#actual-data" title="Permalink to this headline">¶</a></h2>
<p>To see some actual data, we will be using scipy for five topics and five documents.</p>
<p>Note to print these 5 x 5 tables, we used code from SlackOverflow <span id="id4">[<a class="reference internal" href="intro.html#id7">Werner, 2016</a>]</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">dirichlet</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div></div>
</div>
<div class="section" id="alpha-01">
<h3>alpha = .01<a class="headerlink" href="#alpha-01" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">display</span>

<span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">])</span>
<span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">data_for_output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;topic </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_from_dirichlet</span><span class="p">)):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;document </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">data_from_dirichlet</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span>
   <span class="s1">&#39;&lt;table&gt;&lt;tr&gt;</span><span class="si">{}</span><span class="s1">&lt;/tr&gt;&lt;/table&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="s1">&#39;&lt;/tr&gt;&lt;tr&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
           <span class="s1">&#39;&lt;td&gt;</span><span class="si">{}</span><span class="s1">&lt;/td&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">))</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_for_output</span><span class="p">)</span>
       <span class="p">)</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><table><tr><td></td><td><em>topic 0</em></td><td><em>topic 1</em></td><td><em>topic 2</em></td><td><em>topic 3</em></td><td><em>topic 4</em></td></tr><tr><td><em>document 0</em></td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.9</td><td>0.1</td></tr><tr><td><em>document 1</em></td><td>1.0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><td><em>document 2</em></td><td>0.0</td><td>1.0</td><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><td><em>document 3</em></td><td>0.0</td><td>0.0</td><td>0.0</td><td>1.0</td><td>0.0</td></tr><tr><td><em>document 4</em></td><td>1.0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td></tr></table></div></div>
</div>
</div>
<div class="section" id="alpha-1">
<h3>alpha = .1<a class="headerlink" href="#alpha-1" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>

<span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">data_for_output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;topic </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_from_dirichlet</span><span class="p">)):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;document </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">data_from_dirichlet</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span>
   <span class="s1">&#39;&lt;table&gt;&lt;tr&gt;</span><span class="si">{}</span><span class="s1">&lt;/tr&gt;&lt;/table&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="s1">&#39;&lt;/tr&gt;&lt;tr&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
           <span class="s1">&#39;&lt;td&gt;</span><span class="si">{}</span><span class="s1">&lt;/td&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">))</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_for_output</span><span class="p">)</span>
       <span class="p">)</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><table><tr><td></td><td><em>topic 0</em></td><td><em>topic 1</em></td><td><em>topic 2</em></td><td><em>topic 3</em></td><td><em>topic 4</em></td></tr><tr><td><em>document 0</em></td><td>1.0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><td><em>document 1</em></td><td>0.3</td><td>0.0</td><td>0.6</td><td>0.0</td><td>0.0</td></tr><tr><td><em>document 2</em></td><td>0.0</td><td>0.2</td><td>0.0</td><td>0.0</td><td>0.8</td></tr><tr><td><em>document 3</em></td><td>0.0</td><td>1.0</td><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><td><em>document 4</em></td><td>0.0</td><td>0.8</td><td>0.0</td><td>0.0</td><td>0.1</td></tr></table></div></div>
</div>
</div>
<div class="section" id="id5">
<h3>alpha = 1<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">data_for_output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;topic </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_from_dirichlet</span><span class="p">)):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;document </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">data_from_dirichlet</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span>
   <span class="s1">&#39;&lt;table&gt;&lt;tr&gt;</span><span class="si">{}</span><span class="s1">&lt;/tr&gt;&lt;/table&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="s1">&#39;&lt;/tr&gt;&lt;tr&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
           <span class="s1">&#39;&lt;td&gt;</span><span class="si">{}</span><span class="s1">&lt;/td&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">))</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_for_output</span><span class="p">)</span>
       <span class="p">)</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><table><tr><td></td><td><em>topic 0</em></td><td><em>topic 1</em></td><td><em>topic 2</em></td><td><em>topic 3</em></td><td><em>topic 4</em></td></tr><tr><td><em>document 0</em></td><td>0.1</td><td>0.1</td><td>0.4</td><td>0.3</td><td>0.2</td></tr><tr><td><em>document 1</em></td><td>0.2</td><td>0.1</td><td>0.3</td><td>0.2</td><td>0.3</td></tr><tr><td><em>document 2</em></td><td>0.4</td><td>0.1</td><td>0.2</td><td>0.0</td><td>0.3</td></tr><tr><td><em>document 3</em></td><td>0.2</td><td>0.6</td><td>0.0</td><td>0.1</td><td>0.1</td></tr><tr><td><em>document 4</em></td><td>0.5</td><td>0.0</td><td>0.4</td><td>0.1</td><td>0.1</td></tr></table></div></div>
</div>
</div>
<div class="section" id="alpha-10">
<h3>alpha = 10<a class="headerlink" href="#alpha-10" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>

<span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">data_for_output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;topic </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_from_dirichlet</span><span class="p">)):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;document </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">data_from_dirichlet</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span>
   <span class="s1">&#39;&lt;table&gt;&lt;tr&gt;</span><span class="si">{}</span><span class="s1">&lt;/tr&gt;&lt;/table&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="s1">&#39;&lt;/tr&gt;&lt;tr&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
           <span class="s1">&#39;&lt;td&gt;</span><span class="si">{}</span><span class="s1">&lt;/td&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">))</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_for_output</span><span class="p">)</span>
       <span class="p">)</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><table><tr><td></td><td><em>topic 0</em></td><td><em>topic 1</em></td><td><em>topic 2</em></td><td><em>topic 3</em></td><td><em>topic 4</em></td></tr><tr><td><em>document 0</em></td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.3</td><td>0.2</td></tr><tr><td><em>document 1</em></td><td>0.2</td><td>0.2</td><td>0.1</td><td>0.2</td><td>0.2</td></tr><tr><td><em>document 2</em></td><td>0.2</td><td>0.1</td><td>0.2</td><td>0.2</td><td>0.2</td></tr><tr><td><em>document 3</em></td><td>0.2</td><td>0.2</td><td>0.3</td><td>0.1</td><td>0.2</td></tr><tr><td><em>document 4</em></td><td>0.2</td><td>0.2</td><td>0.1</td><td>0.2</td><td>0.2</td></tr></table></div></div>
</div>
</div>
<div class="section" id="alpha-100">
<h3>alpha = 100<a class="headerlink" href="#alpha-100" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>

<span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">data_for_output</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;topic </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_from_dirichlet</span><span class="p">)):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;document </span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">data_from_dirichlet</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
        <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="n">data_for_output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">HTML</span><span class="p">(</span>
   <span class="s1">&#39;&lt;table&gt;&lt;tr&gt;</span><span class="si">{}</span><span class="s1">&lt;/tr&gt;&lt;/table&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="s1">&#39;&lt;/tr&gt;&lt;tr&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
           <span class="s1">&#39;&lt;td&gt;</span><span class="si">{}</span><span class="s1">&lt;/td&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">))</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data_for_output</span><span class="p">)</span>
       <span class="p">)</span>
<span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><table><tr><td></td><td><em>topic 0</em></td><td><em>topic 1</em></td><td><em>topic 2</em></td><td><em>topic 3</em></td><td><em>topic 4</em></td></tr><tr><td><em>document 0</em></td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td></tr><tr><td><em>document 1</em></td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td></tr><tr><td><em>document 2</em></td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td></tr><tr><td><em>document 3</em></td><td>0.2</td><td>0.2</td><td>0.3</td><td>0.2</td><td>0.2</td></tr><tr><td><em>document 4</em></td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td><td>0.2</td></tr></table></div></div>
</div>
</div>
</div>
<div class="section" id="force-directed-graph-dirichlet-example">
<h2>Force-Directed Graph + Dirichlet Example<a class="headerlink" href="#force-directed-graph-dirichlet-example" title="Permalink to this headline">¶</a></h2>
<p>To tie this conversation together, we coupled the force-directed graph and Dirichlet. The first set of code (hidden) created the original dataset. The force-directed graph highlights, as you change the alpha, how the documents shift in space.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">alphas</span> <span class="o">=</span> <span class="p">[</span><span class="mf">.001</span><span class="p">,</span><span class="mf">.005</span><span class="p">,</span><span class="mf">.01</span><span class="p">,</span><span class="mf">.05</span><span class="p">,</span><span class="mf">.1</span><span class="p">,</span><span class="mf">.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">]</span>

<span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">alphas</span><span class="p">:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">*</span> <span class="mi">20</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">dirichlet</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">53155618</span><span class="p">)</span>
    <span class="n">data_from_dirichlet</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">data_from_dirichlet</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="n">output</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_from_dirichlet</span>
    
    
<span class="c1">#with open(&#39;dirichlet.json&#39;, &#39;w&#39;) as outfile:</span>
<span class="c1">#    json.dump(output, outfile)</span>
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%html</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span> Changing Alpha Values <span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(.001)&quot;</span><span class="p">&gt;</span> .001
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(.005)&quot;</span><span class="p">&gt;</span> .005
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(.01)&quot;</span><span class="p">&gt;</span> .01
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(.05)&quot;</span><span class="p">&gt;</span> .05
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(.1)&quot;</span><span class="p">&gt;</span> .1
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(.5)&quot;</span><span class="p">&gt;</span> .5
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(1)&quot;</span> <span class="na">checked</span><span class="p">&gt;</span> 1
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(1.5)&quot;</span><span class="p">&gt;</span> 1.5
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(5)&quot;</span><span class="p">&gt;</span> 5
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(10)&quot;</span><span class="p">&gt;</span> 10
<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;graph&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;graph(100)&quot;</span><span class="p">&gt;</span> 100

<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;forceTopics&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>   
    <span class="kd">var</span> <span class="nx">simulation</span><span class="p">,</span> <span class="nx">svg20</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/dudaspm/LDA_Bias_Data/main/dirichlet.json&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">dirichlet</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">500</span>
            <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">500</span>
            <span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="mf">30</span> 
            <span class="kd">var</span> <span class="nx">soup</span> <span class="o">=</span> <span class="s1">&#39;🐈,🐦,🐳,🐧,🐕,🐙,🐝,🐄,🐪,🐍,🐞,🐬,🐑,🐉,🐤,🐢,🐒,🐘,🐠,🐁&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scaleLinear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span><span class="nx">soup</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">]).</span><span class="nx">range</span><span class="p">([</span><span class="mf">0</span><span class="p">,</span> <span class="mf">2</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">radius</span> <span class="o">=</span> <span class="p">(</span><span class="nx">width</span><span class="o">-</span><span class="nx">margin</span><span class="p">)</span><span class="o">/</span><span class="mf">2</span>
            
            <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[]</span>
            
            <span class="nx">soup</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                <span class="nx">cx</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
                <span class="nx">cy</span> <span class="o">=</span> <span class="p">((</span><span class="nx">radius</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span><span class="p">(</span><span class="nx">i</span><span class="p">)))</span> <span class="o">+</span> <span class="p">(</span><span class="nx">height</span><span class="o">/</span><span class="mf">2</span><span class="p">)</span>
                <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="nx">d</span><span class="p">,</span> <span class="s2">&quot;fx&quot;</span><span class="o">:</span><span class="nx">cx</span><span class="p">,</span> <span class="s2">&quot;fy&quot;</span><span class="o">:</span><span class="nx">cy</span><span class="p">})</span>
            <span class="p">})</span>
            
            <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="o">:</span><span class="s2">&quot;📄&quot;</span><span class="p">})</span>
            <span class="p">})</span>
            
            <span class="nx">weights</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span>  <span class="p">{</span> 
                 <span class="nx">weights</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">20</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                    <span class="nx">weights</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)][</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="p">})</span>
            <span class="p">})</span>
            
            <span class="k">for</span> <span class="p">(</span><span class="nx">alpha</span> <span class="k">in</span> <span class="nx">dirichlet</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">dirichlet</span><span class="p">[</span><span class="nx">alpha</span><span class="p">].</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)=&gt;{</span>
                    <span class="nx">d</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">)=&gt;{</span>
                        <span class="nx">weights</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)][</span><span class="nx">j</span><span class="p">][</span><span class="nx">alpha</span><span class="p">]</span> <span class="o">=</span> <span class="nx">e</span>
                    <span class="p">})</span>                   
                <span class="p">})</span>        
            <span class="p">}</span>

            <span class="nx">links</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">10</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span><span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span>  <span class="p">{</span> 
                <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="mf">20</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">e</span><span class="p">,</span><span class="nx">j</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                    <span class="nx">links</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="s2">&quot;source&quot;</span><span class="o">:</span><span class="nx">nodes</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)],</span><span class="s2">&quot;target&quot;</span><span class="o">:</span><span class="nx">nodes</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">weights</span><span class="o">:</span> <span class="p">{}})</span>
                    <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">weights</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)][</span><span class="nx">j</span><span class="p">])</span> <span class="p">{</span>
                        <span class="nx">links</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">f</span><span class="p">=&gt;(</span><span class="nx">f</span><span class="p">.</span><span class="nx">source</span> <span class="o">==</span> <span class="nx">nodes</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">target</span> <span class="o">==</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">j</span><span class="p">]))[</span><span class="mf">0</span><span class="p">].</span><span class="nx">weights</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">weights</span><span class="p">[(</span><span class="nx">i</span><span class="o">+</span><span class="mf">20</span><span class="p">)][</span><span class="nx">j</span><span class="p">][</span><span class="nx">k</span><span class="p">]</span>
                    <span class="p">}</span>
                    
                <span class="p">})</span>
            <span class="p">})</span>

            <span class="kd">var</span> <span class="nx">svg20</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#forceTopics&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>          

            <span class="nx">simulation</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceSimulation</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceLink</span><span class="p">(</span><span class="nx">links</span><span class="p">).</span><span class="nx">id</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">strength</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">weights</span><span class="p">[</span><span class="mf">1</span><span class="p">]))</span>
                <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;charge&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceManyBody</span><span class="p">().</span><span class="nx">strength</span><span class="p">(</span><span class="o">-</span><span class="mf">30</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceCenter</span><span class="p">(</span><span class="nx">width</span> <span class="o">/</span> <span class="mf">2</span><span class="p">,</span> <span class="nx">height</span> <span class="o">/</span> <span class="mf">2</span><span class="p">).</span><span class="nx">strength</span><span class="p">(</span><span class="mf">2</span><span class="p">))</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;tick&quot;</span><span class="p">,</span> <span class="nx">ticked</span><span class="p">)</span>

            <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.links&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">links</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;links&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;stroke&quot;</span><span class="p">,</span> <span class="s2">&quot;lightgrey&quot;</span><span class="p">)</span>
                
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">weights</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span><span class="o">*</span><span class="mf">5</span><span class="p">)</span>

            <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nodes&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span><span class="s2">&quot;nodes&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;font-size&quot;</span><span class="p">,</span> <span class="s2">&quot;20px&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>

            <span class="nx">node</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
              <span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>

            <span class="kd">function</span> <span class="nx">ticked</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;text.nodes&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>

                <span class="nx">svg20</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.links&quot;</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x1&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y1&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
            <span class="p">}</span>
            

            
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
        
        <span class="p">})</span>
        <span class="kd">function</span> <span class="nx">graph</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;div#forceTopics&quot;</span><span class="p">).</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;line.links&quot;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
                <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;stroke-width&quot;</span><span class="p">,</span> <span class="nx">d</span> <span class="p">=&gt;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">weights</span><span class="p">[</span><span class="nx">n</span><span class="p">])</span><span class="o">*</span><span class="mf">5</span><span class="p">)</span>
            <span class="nx">simulation</span>
            <span class="p">.</span><span class="nx">force</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">forceLink</span><span class="p">(</span><span class="nx">links</span><span class="p">).</span><span class="nx">id</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">strength</span><span class="p">(</span><span class="nx">d</span><span class="p">=&gt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">weights</span><span class="p">[</span><span class="nx">n</span><span class="p">]))</span>
            <span class="p">.</span><span class="nx">alpha</span><span class="p">(</span><span class="mf">.5</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">alphaTarget</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">restart</span><span class="p">();</span>
        <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><script src='https://d3js.org/d3.v6.min.js'></script></div><div class="output text_html"><h2> Changing Alpha Values </h2>
<input type="radio" name="graph" onclick="graph(.001)"> .001
<input type="radio" name="graph" onclick="graph(.005)"> .005
<input type="radio" name="graph" onclick="graph(.01)"> .01
<input type="radio" name="graph" onclick="graph(.05)"> .05
<input type="radio" name="graph" onclick="graph(.1)"> .1
<input type="radio" name="graph" onclick="graph(.5)"> .5
<input type="radio" name="graph" onclick="graph(1)" checked> 1
<input type="radio" name="graph" onclick="graph(1.5)"> 1.5
<input type="radio" name="graph" onclick="graph(5)"> 5
<input type="radio" name="graph" onclick="graph(10)"> 10
<input type="radio" name="graph" onclick="graph(100)"> 100

<br><br>
<div id="forceTopics"></div>
<script type="text/javascript">   
    var simulation, svg20
    d3.json('https://raw.githubusercontent.com/dudaspm/LDA_Bias_Data/main/dirichlet.json')
        .then(function(dirichlet) {
            var width = 500
            var height = 500
            var margin = 30 
            var soup = '🐈,🐦,🐳,🐧,🐕,🐙,🐝,🐄,🐪,🐍,🐞,🐬,🐑,🐉,🐤,🐢,🐒,🐘,🐠,🐁'.split(',');
            var x = d3.scaleLinear().domain([0,soup.length-1]).range([0, 2*Math.PI])
            var radius = (width-margin)/2

            nodes = []

            soup.forEach((d,i) => {
                cx = ((radius) * Math.cos(x(i))) + (width/2)
                cy = ((radius) * Math.sin(x(i))) + (height/2)
                nodes.push({"name":d, "fx":cx, "fy":cy})
            })

            d3.range(10).forEach((d,i) => {
                nodes.push({"name":"📄"})
            })

            weights = {}
            d3.range(10).forEach((d,i) =>  { 
                 weights[(i+20)] = {}
                d3.range(20).forEach((e,j) => {
                    weights[(i+20)][j] = {}
                })
            })

            for (alpha in dirichlet) {
                dirichlet[alpha].forEach((d,i)=>{
                    d.forEach((e,j)=>{
                        weights[(i+20)][j][alpha] = e
                    })                   
                })        
            }

            links = []
            d3.range(10).forEach((d,i) =>  { 
                d3.range(20).forEach((e,j) => {
                    links.push({"source":nodes[(i+20)],"target":nodes[j], weights: {}})
                    for (k in weights[(i+20)][j]) {
                        links.filter(f=>(f.source == nodes[(i+20)]) && (f.target == nodes[j]))[0].weights[k] = weights[(i+20)][j][k]
                    }

                })
            })

            var svg20 = d3.select("div#forceTopics").append("svg")
                .attr("width", width)
                .attr("height", height)          

            simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.name).strength(d=>d.weights[1]))
                .force("charge", d3.forceManyBody().strength(-30))
                .force("center", d3.forceCenter(width / 2, height / 2).strength(2))
                .on("tick", ticked)

            var link = svg20.selectAll("line.links").data(links)
                .join("line")
                .attr("class","links")
                .style("stroke", "lightgrey")

                .attr("stroke-width", d => Math.sqrt(d.weights[1])*5)

            var node = svg20.selectAll("text.nodes").data(nodes)
                .join("text")
                .attr("class","nodes")
                .style("font-size", "20px")
                .style("text-anchor", "middle")
                .text(d => d.name)

            node.append("title")
              .text(d => d.name);

            function ticked() {
                svg20.selectAll("text.nodes")
                    .attr("x",d=>d.x)
                    .attr("y",d=>d.y)

                svg20.selectAll("line.links")
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y)
            }



        })
        .catch(function(error){
            console.log(error)

        })
        function graph(n) {
            d3.select("div#forceTopics").select("svg").selectAll("line.links")
                .transition()
                .duration(1000)
                .attr("stroke-width", d => Math.sqrt(d.weights[n])*5)
            simulation
            .force("link", d3.forceLink(links).id(d => d.name).strength(d=>d.weights[n]))
            .alpha(.5)
            .alphaTarget(0.3)
            .restart();
        }
</script>
</div></div>
</div>
</div>
<div class="section" id="next-we-provide-a-use-case-for-lda">
<h2>Next we provide a use-case for LDA.<a class="headerlink" href="#next-we-provide-a-use-case-for-lda" title="Permalink to this headline">¶</a></h2>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "dudaspm/LDA_Bias_Data",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="Latent%20Dirichlet%20Allocation%20%28LDA%29.html" title="previous page">Latent Dirichlet Allocation (LDA)</a>
    <a class='right-next' id="next-link" href="Jigsaw%20-%20an%20Implementation%20of%20LDA.html" title="next page">Jigsaw - an Implementation of LDA</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By anonymous<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>